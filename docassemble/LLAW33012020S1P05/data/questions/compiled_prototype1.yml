# This is the main file for the Disability Discrimination Report Form.  It drives the logic flow.
---
# Metadata about the app
metadata:
  title: |
    Ensuring Equality: Disability Discrimination Report Form
  short title: |
    Disability Discrimination Report Form
  authors:
    - name: Julia Weltner
    - name: Casey Moffatt
    - name: Lucy Schapel
    - name: Nakisa Hashemi
  organisation:  Flinders University
  revision_date: 2020-06-3
---
default screen parts:
  post: |
    <div style="display: flex; height: 200px; align-items: flex-end; flex-direction: row-reverse">
    <div style="margin: 5px"><img src="https://staff.flinders.edu.au/etc.clientlibs/flinders/clientlibs/clientlib-site/resources/images/flinderuni_main_logo_black.png" height="40">
    </div>
    <div style="margin: 5px; text-align: center">
    <cite><small><i>
    Developed by Flinders University in collaboration with Equality Lawyers
    </i></small></cite>
    </div>
    </div>
---
features:
  css: prototype.css
  debug: False
  hide standard menu: True
  navigation: True
---
objects:
  - JIWlogo: DAStaticFile.using(filename='EQL.logo.png')
---
mandatory: True
code: |
  set_parts(logo='<img src="' + JIWlogo.url_for() + '" style="height: 50px; alt=''">')
---
objects:
  - endpoint: DADict
---
include:
  - EQLwelcome_and_disclaimer.yml
  - EQLchooses_myself_personal_info.yml
  - EQLchooses_someone_else_personal_info.yml
  - EQLincident_questions.yml
  - EQLdesired_outcome_questions.yml
  - EQLsend_email.yml
  - EQLreview_answers.yml
---
sections:
  - Welcome: Welcome
  - Disclaimer: Disclaimer
  - Personal Information: Personal Information
  - Incident Information: Incident Information
  - Outcome: Outcome
  - Review: Review
  - Summary: Summary 
---
# Collects personal and disability information
question: |
  Are you filling out this form for yourself or on the behalf of someone else?
fields:
  - no label: EQLperson_filling_in_form
    datatype: radio
    choices:
    - Myself
    - Someone else
section: Personal Information
---
# Code for all of the personal and disability information pathways
mandatory: true
code: |
  if EQLperson_filling_in_form == 'Myself':
    EQLfirstname1
    EQLemail1
    EQLdis1
    if EQLdis1 == 'I have a disability' or EQLdis1 == 'I had a disability in the past':
        EQLdis_type1
    elif EQLdis1 == 'I may develop a disability in the future':
      EQLexplain_future1
    elif EQLdis1 == 'People think I have a disability':
      EQLexplain_ppl_thk1
    else:
      if EQLrelationship1 == 'Yes':
        EQLrelationship_with1 
      else:
        EQLfor_me1
  else:
    EQLrelation_to
    EQLfirstname2
    EQLlastname2
    EQLemail2
    EQLrelation_to_dis
    EQLfirstname3
    EQLemail3
    EQLdis3
    if ( EQLdis3 == 'They have a disability' ) or ( EQLdis3 == 'They had a disability in the past' ):
      EQLdis_type3
    elif EQLdis3 == 'They may develop a disability in the future':
      EQLexplain_future3
    elif EQLdis3 == 'People think they have a disability':
      EQLexplain_ppl_thk3
    else:
      if EQLrelationship3 == 'Yes':
        EQLrelationship_with3
      else:
        EQLfor_me3
---
# Collects information about the incident
mandatory: True
code: |
  EQLdate
  EQLwhere
  EQLwhowhat
  EQLanimal
  if EQLanimal == 'Yes':
    EQLdo_they_apply
---
# Collects information about the desired outcome
mandatory: True
code: | 
  if EQLoutcome == 'I would like to make a formal complaint':
    EQLoutcome_complaint
    user_review
  else:
    user_review
---
# Sends user to sending page and the final screen
mandatory: true
code: |
  if submit_to_authority == 'Yes':
      EQLcontact_me
      email_sent
  else: 
    email_not_sent
---